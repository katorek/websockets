<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="connectFour" width="700" height="600"></canvas>

<script>
    //init
    var canvas = document.getElementById('connectFour');
    var ctx = canvas.getContext('2d');
    // ctx.lineWidth = 2;

    ctx.strokeStyle = '#000000';
    ctx.beginPath();
    ctx.moveTo(174, 67);
    ctx.lineTo(177, 455);
    ctx.stroke();
    ctx.closePath();

    // fill with gray color
    ctx.fillStyle = "gray";
    ctx.fillRect(0, 0, canvas.width, canvas.height);


    // draw boxes
    for (var i = 0; i < 7; i++) {
        for (var j = 0; j < 6; j++) {

            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(i * 100 + 50, j * 100 + 50, 37, 0, 2 * Math.PI);
            ctx.stroke();

            ctx.beginPath();
            ctx.fillStyle = '#FFFFFF';
            ctx.arc(i * 100 + 50, j * 100 + 50, 35, 0, 2 * Math.PI);
            ctx.fill();
        }
    }


    function fillXYReversed(x, y, player) {
        var canvas = document.getElementById('connectFour');
        var ctx = canvas.getContext('2d');
        ctx.beginPath();

        if (player === 1) {
            ctx.fillStyle = '#FFFF00';
        } else {
            ctx.fillStyle = '#00FF00';
        }
        ctx.arc(x * 100 + 50, y * 100 + 50, 32, 0, 2 * Math.PI);
        ctx.fill();
        console.log(x + "," + y + " -> " + player);
    }


    function fillColRow(x, y, player) {
        fillXYReversed(x - 1, 6 - y, player)
    }

    var currentPlayer = 1;

    function drawOnBox(canvas, event) {
        var rect = canvas.getBoundingClientRect();
        var x = event.clientX - rect.left;
        var y = event.clientY - rect.top;
        var col = Math.floor(x / 100);
        var row = Math.floor(y / 100);
        // console.log("x: " + x + " y: " + y);
        console.log("COL: " + col + " ROW: " + row);
        // fillColRow(col+1, row+1, currentPlayer);
        fillXYReversed(col, row, currentPlayer);
        currentPlayer *= -1;

    }

    canvas.addEventListener('mousedown', function (e) {
        drawOnBox(canvas, e);
    });

    // fillColRow(1,1,1);
    // fillColRow(2,1,0);


    function intToArrayBuffer(player, arr) {
        var array = new Array();
        for (var i = 0; i < arr.length; i++) {
            for (var j = 0; j < arr[i].length; j++) {
                array.push(arr[i][j]);
            }
        }
        array.push(player);
        return new Uint8Array(array);
    }

    function arrayBufferToGameMatrix(buffArray) {
        var array = [];
        for (var i = 0; i < 6; i++) {
            array.push([]);
            for (var j = 0; j < 7; j++) {
                array[i].push(buffArray[i * 7 + j])
            }
        }
        // var player = buffArray[7 * 6];
        return [buffArray[6*7], array];
    }

    var arr = [
        [1, 0, 0, 0, 0, 0, 3],
        [1, 0, 0, 0, 0, 0, 3],
        [1, 0, 0, 0, 0, 0, 3],
        [1, 0, 0, 0, 0, 0, 3],
        [1, 0, 0, 0, 0, 0, 3],
        [1, 0, 0, 0, 0, 0, 3]];

    intToArrayBuffer(2, arr);


</script>
<script>
</script>
</body>
</html>